-- This script must be executed on target DB
drop user apphist cascade;
-- USER SQL
CREATE USER AppHist identified by "Welcome1234__" DEFAULT TABLESPACE DATA TEMPORARY TABLESPACE TEMP;
-- QUOTAS
ALTER USER AppHist QUOTA UNLIMITED ON DATA;
alter user AppHist grant connect through admin;
grant select any dictionary,connect,dwrole to AppHist;

drop table AppHist.emp;
  CREATE TABLE AppHist.EMP 
   (	EMPNO VARCHAR2(20 BYTE)  NOT NULL ENABLE, 
	EMP_NAME VARCHAR2(20 BYTE) , 
	DESIGNATION VARCHAR2(20 BYTE) , 
	DEPARTMENT VARCHAR2(20 BYTE) , 
	SALARY NUMBER, 
	DOB DATE, 
	HOMECOUNTRY VARCHAR2(20 BYTE) , 
	WORKCOUNTRY VARCHAR2(20 BYTE) , 
	STATUS VARCHAR2(20 BYTE)  NOT NULL ENABLE, 
	 CONSTRAINT EMP_PK PRIMARY KEY (EMPNO)  USING INDEX    )  ;

--  DDL for Table DEPARTMENT

drop table AppHist.department;
  CREATE TABLE AppHist.DEPARTMENT 
   (	DEPTNO NUMBER NOT NULL ENABLE, 
	DEPTNAME VARCHAR2(20 BYTE) , 
	LOB VARCHAR2(20 BYTE) , 
	COUNTRY VARCHAR2(20 BYTE) , 
	COSTCENTER VARCHAR2(20 BYTE) , 
	 CONSTRAINT DEPARTMENT_PK PRIMARY KEY (DEPTNO)  USING INDEX ENABLE
   ) ;

drop table AppHist.emp_hist;
 CREATE TABLE APPHIST.EMP_HIST 
(
  TRAN_NUMBER NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY INCREMENT BY 1 MAXVALUE 9999999999999999999999999999 MINVALUE 1 CACHE 20 NOT NULL 
, EMPNO VARCHAR2(20 BYTE) NOT NULL 
, EMP_NAME_ORG VARCHAR2(20 BYTE) 
, EMP_NAME_NEW VARCHAR2(20 BYTE) 
, DESIGNATION_ORG VARCHAR2(20 BYTE) 
, DESIGNATION_NEW VARCHAR2(20 BYTE) 
, DEPARTMENT_ORG VARCHAR2(20 BYTE) 
, DEPARTMENT_NEW VARCHAR2(20 BYTE) 
, SALARY_ORG NUMBER 
, SALARY_NEW NUMBER 
, DOB DATE 
, HOMECOUNTRY_ORG VARCHAR2(20 BYTE) 
, HOMECOUNTRY_NEW VARCHAR2(20 BYTE) 
, WORKCOUNTRY_ORG VARCHAR2(20 BYTE) 
, WORKCOUNTRY_NEW VARCHAR2(20 BYTE) 
, STATUS_ORG VARCHAR2(20 BYTE) 
, STATUS_NEW VARCHAR2(20 BYTE) 
, TRANSACTION_DATE TIMESTAMP(6) 
, TRANSACTION_USERNAME VARCHAR2(20 BYTE) 
, CONSTRAINT EMP_HIST_PK PRIMARY KEY 
  (    TRAN_NUMBER   )
  USING INDEX 
  (   CREATE UNIQUE INDEX APPHIST.EMP_HIST_PK ON APPHIST.EMP_HIST (TRAN_NUMBER ASC)  )
  ENABLE 
) ;

TRUNCATE TABLE apphist.DEPARTMENT;
TRUNCATE TABLE apphist.EMP;
TRUNCATE TABLE apphist.EMP_HIST;
